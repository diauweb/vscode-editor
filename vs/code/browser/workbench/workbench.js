/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var S=["vs/code/browser/workbench/workbench","require","exports","vs/base/browser/browser","vs/base/common/buffer","vs/base/common/cancellation","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/network","vs/base/common/resources","vs/base/common/uri","vs/base/common/uuid","vs/base/parts/request/browser/request","vs/nls!vs/code/browser/workbench/workbench","vs/platform/log/common/log","vs/platform/product/common/product","vs/platform/windows/common/windows","vs/workbench/workbench.web.api"],M=function(R){for(var p=[],u=0,y=R.length;u<y;u++)p[u]=S[R[u]];return p};define(S[0],M([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),function(R,p,u,y,O,A,P,v,T,d,Q,Y,l,$,w,i,k){"use strict";Object.defineProperty(p,"__esModule",{value:!0});function U(h,t){let e;if(t){let r=0;t.forEach((o,a)=>{e||(e=""),e+=`${r++==0?"":"&"}${a}=${encodeURIComponent(o)}`})}return d.URI.parse(window.location.href).with({path:h,query:e})}class f{constructor(){let t;const e=document.getElementById("vscode-workbench-auth-session"),r=e?e.getAttribute("data-settings"):void 0;if(r)try{t=JSON.parse(r)}catch(o){}t&&(this.setPassword(`${w.default.urlProtocol}.login`,"account",JSON.stringify(t)),this.authService=`${w.default.urlProtocol}-${t.providerId}.login`,this.setPassword(this.authService,"account",JSON.stringify(t.scopes.map(o=>({id:t.id,scopes:o,accessToken:t.accessToken})))))}get credentials(){if(!this._credentials){try{const t=window.localStorage.getItem(f.CREDENTIALS_OPENED_KEY);t&&(this._credentials=JSON.parse(t))}catch(t){}Array.isArray(this._credentials)||(this._credentials=[])}return this._credentials}save(){window.localStorage.setItem(f.CREDENTIALS_OPENED_KEY,JSON.stringify(this.credentials))}async getPassword(t,e){return this.doGetPassword(t,e)}async doGetPassword(t,e){for(const r of this.credentials)if(r.service===t&&(typeof e!="string"||e===r.account))return r.password;return null}async setPassword(t,e,r){this.doDeletePassword(t,e),this.credentials.push({service:t,account:e,password:r}),this.save();try{if(r&&t===this.authService){const o=JSON.parse(r);Array.isArray(o)&&o.length===0&&await this.logout(t)}}catch(o){console.log(o)}}async deletePassword(t,e){const r=await this.doDeletePassword(t,e);if(r&&t===this.authService)try{await this.logout(t)}catch(o){console.log(o)}return r}async doDeletePassword(t,e){let r=!1;return this._credentials=this.credentials.filter(o=>o.service===t&&o.account===e?(r=!0,!1):!0),r&&this.save(),r}async findPassword(t){return this.doGetPassword(t)}async findCredentials(t){return this.credentials.filter(e=>e.service===t).map(({account:e,password:r})=>({account:e,password:r}))}async logout(t){const e=new Map;e.set("logout",String(!0)),e.set("service",t),await(0,Y.request)({url:U("/auth/logout",e).toString(!0)},O.CancellationToken.None)}async clear(){window.localStorage.removeItem(f.CREDENTIALS_OPENED_KEY)}}f.CREDENTIALS_OPENED_KEY="credentials.provider";class s extends P.Disposable{constructor(){super(...arguments);this._onCallback=this._register(new A.Emitter),this.onCallback=this._onCallback.event}create(t){const e=new Map,r=(0,Q.generateUuid)();e.set(s.QUERY_KEYS.REQUEST_ID,r);const{scheme:o,authority:a,path:c,query:b,fragment:m}=t||{scheme:void 0,authority:void 0,path:void 0,query:void 0,fragment:void 0};return o&&e.set(s.QUERY_KEYS.SCHEME,o),a&&e.set(s.QUERY_KEYS.AUTHORITY,a),c&&e.set(s.QUERY_KEYS.PATH,c),b&&e.set(s.QUERY_KEYS.QUERY,b),m&&e.set(s.QUERY_KEYS.FRAGMENT,m),this.periodicFetchCallback(r,Date.now()),U("/callback",e)}async periodicFetchCallback(t,e){const r=new Map;r.set(s.QUERY_KEYS.REQUEST_ID,t);const o=await(0,Y.request)({url:U("/fetch-callback",r).toString(!0)},O.CancellationToken.None),a=await(0,y.streamToBuffer)(o.stream);if(a.byteLength>0){try{this._onCallback.fire(d.URI.revive(JSON.parse(a.toString())))}catch(c){console.error(c)}return}Date.now()-e<s.FETCH_TIMEOUT&&setTimeout(()=>this.periodicFetchCallback(t,e),s.FETCH_INTERVAL)}}s.FETCH_INTERVAL=500,s.FETCH_TIMEOUT=5*60*1e3,s.QUERY_KEYS={REQUEST_ID:"vscode-requestId",SCHEME:"vscode-scheme",AUTHORITY:"vscode-authority",PATH:"vscode-path",QUERY:"vscode-query",FRAGMENT:"vscode-fragment"};class n{constructor(t,e){this.workspace=t,this.payload=e,this.trusted=!0}async open(t,e){if(e?.reuse&&!e.payload&&this.isSame(this.workspace,t))return!0;const r=this.createTargetUrl(t,e);if(r){if(e?.reuse)return window.location.href=r,!0;{let o;return u.isStandalone?o=window.open(r,"_blank","toolbar=no"):o=window.open(r),!!o}}return!1}createTargetUrl(t,e){let r;return t?(0,i.isFolderToOpen)(t)?r=`${document.location.origin}${document.location.pathname}?${n.QUERY_PARAM_FOLDER}=${encodeURIComponent(t.folderUri.toString())}`:(0,i.isWorkspaceToOpen)(t)&&(r=`${document.location.origin}${document.location.pathname}?${n.QUERY_PARAM_WORKSPACE}=${encodeURIComponent(t.workspaceUri.toString())}`):r=`${document.location.origin}${document.location.pathname}?${n.QUERY_PARAM_EMPTY_WINDOW}=true`,e?.payload&&(r+=`&${n.QUERY_PARAM_PAYLOAD}=${encodeURIComponent(JSON.stringify(e.payload))}`),r}isSame(t,e){return!t||!e?t===e:(0,i.isFolderToOpen)(t)&&(0,i.isFolderToOpen)(e)?(0,T.isEqual)(t.folderUri,e.folderUri):(0,i.isWorkspaceToOpen)(t)&&(0,i.isWorkspaceToOpen)(e)?(0,T.isEqual)(t.workspaceUri,e.workspaceUri):!1}hasRemote(){if(this.workspace){if((0,i.isFolderToOpen)(this.workspace))return this.workspace.folderUri.scheme===v.Schemas.vscodeRemote;if((0,i.isWorkspaceToOpen)(this.workspace))return this.workspace.workspaceUri.scheme===v.Schemas.vscodeRemote}return!0}}n.QUERY_PARAM_EMPTY_WINDOW="ew",n.QUERY_PARAM_FOLDER="folder",n.QUERY_PARAM_WORKSPACE="workspace",n.QUERY_PARAM_PAYLOAD="payload";class _{constructor(t){this.onDidChange=A.Event.None;let e,r;if(t){let o;(0,i.isFolderToOpen)(t)?o=t.folderUri:(0,i.isWorkspaceToOpen)(t)&&(o=t.workspaceUri),(o?.scheme==="github"||o?.scheme==="codespace")&&([e,r]=o.authority.split("+"))}r&&e?(this.label=(0,l.localize)(0,null,e,r),this.tooltip=(0,l.localize)(1,null,e,r)):(this.label=(0,l.localize)(2,null),this.tooltip=(0,l.localize)(3,null),this.label=(0,l.localize)(4,null),this.tooltip="OI Wiki Editor")}}(function(){const h=document.getElementById("vscode-workbench-web-configuration"),t=h?h.getAttribute("data-settings"):void 0;if(!h||!t)throw new Error("Missing web configuration element");const e=JSON.parse(t);let r=!1,o,a=Object.create(null),c;new URL(document.location.href).searchParams.forEach((E,g)=>{switch(g){case n.QUERY_PARAM_FOLDER:o={folderUri:d.URI.parse(E)},r=!0;break;case n.QUERY_PARAM_WORKSPACE:o={workspaceUri:d.URI.parse(E)},r=!0;break;case n.QUERY_PARAM_EMPTY_WINDOW:o=void 0,r=!0;break;case n.QUERY_PARAM_PAYLOAD:try{a=JSON.parse(E)}catch(N){console.error(N)}break;case"logLevel":c=E;break}}),r||(e.folderUri?o={folderUri:d.URI.revive(e.folderUri)}:e.workspaceUri?o={workspaceUri:d.URI.revive(e.workspaceUri)}:o=void 0);const m=new n(o,a),C={href:"https://github.com/microsoft/vscode",icon:"code",title:(0,l.localize)(5,null)},q={message:(0,l.localize)(6,null,w.default.nameShort),actions:[{href:"https://github.com/microsoft/vscode",label:(0,l.localize)(7,null)}]};let I;m.hasRemote()||(I=new _(o));const F=E=>{let g=`quality=${E}`;new URL(document.location.href).searchParams.forEach((W,D)=>{D!=="quality"&&(g+=`&${D}=${W}`)}),window.location.href=`${window.location.origin}?${g}`},K=e.settingsSyncOptions?{enabled:e.settingsSyncOptions.enabled}:void 0;(0,k.create)(document.body,{...e,developmentOptions:{logLevel:c?(0,$.parseLogLevel)(c):void 0,...e.developmentOptions},settingsSyncOptions:K,homeIndicator:C,windowIndicator:I,productQualityChangeHandler:F,workspaceProvider:m,urlCallbackProvider:new s,credentialsProvider:new f})})()})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/899d46d82c4c95423fb7e10e68eba52050e30ba3/core/vs/code/browser/workbench/workbench.js.map

/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var V=["require","exports","vs/base/common/platform","vs/base/common/extpath","vs/base/common/path","vs/base/common/types","vs/base/common/uri","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/network","vs/base/common/resources","vs/base/common/processes","vs/base/common/stream","vs/base/common/errors","vs/base/common/buffer","vs/base/common/map","vs/base/common/arrays","vs/base/common/normalization","vs/base/common/console","vs/base/common/async","vs/base/common/event","vs/base/common/uuid","vs/base/node/decoder","vs/base/node/pfs","vs/nls!vs/base/common/errorMessage","vs/nls","vs/nls!vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain","vs/base/common/errorMessage","vs/nls!vs/base/node/processes","vs/base/node/processes","child_process","vs/base/common/objects","vs/platform/instantiation/common/instantiation","vs/platform/sharedProcess/common/sharedProcessWorkerService","vs/platform/sharedProcess/electron-browser/sharedProcessWorker","vs/base/common/cancellation","string_decoder","fs","os","util","vs/base/common/process","vs/base/common/hash","vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain","console"],H=function(z){for(var t=[],u=0,P=z.length;u<P;u++)t[u]=V[z[u]];return t};define(V[11],H([0,1]),function(z,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeProcessEnvironment=t.TerminateResponseCode=t.Source=void 0;var u;(function(I){I[I.stdout=0]="stdout",I[I.stderr=1]="stderr"})(u=t.Source||(t.Source={}));var P;(function(I){I[I.Success=0]="Success",I[I.Unknown=1]="Unknown",I[I.AccessDenied=2]="AccessDenied",I[I.ProcessNotFound=3]="ProcessNotFound"})(P=t.TerminateResponseCode||(t.TerminateResponseCode={}));function h(I,...d){const v=d.reduce((y,U)=>(y[U]=!0,y),{}),c=[/^ELECTRON_.+$/,/^VSCODE_.+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(I).filter(y=>!v[y]).forEach(y=>{for(let U=0;U<c.length;U++)if(y.search(c[U])!==-1){delete I[y];break}})}t.sanitizeProcessEnvironment=h}),define(V[12],H([0,1,13,7]),function(z,t,u,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedStream=t.prefixedReadable=t.transform=t.toReadable=t.emptyStream=t.toStream=t.peekStream=t.listenStream=t.consumeStream=t.peekReadable=t.consumeReadable=t.newWriteableStream=t.isReadableBufferedStream=t.isReadableStream=void 0;function h(T){const g=T;return g?[g.on,g.pause,g.resume,g.destroy].every(E=>typeof E=="function"):!1}t.isReadableStream=h;function I(T){const g=T;return g?h(g.stream)&&Array.isArray(g.buffer)&&typeof g.ended=="boolean":!1}t.isReadableBufferedStream=I;function d(T,g){return new v(T,g)}t.newWriteableStream=d;class v{constructor(g,E){this.reducer=g,this.options=E,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(g){if(!this.state.destroyed){if(this.state.flowing)this.emitData(g);else if(this.buffer.data.push(g),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(E=>this.pendingWritePromises.push(E))}}error(g){this.state.destroyed||(this.state.flowing?this.emitError(g):this.buffer.error.push(g))}end(g){this.state.destroyed||(typeof g!="undefined"&&this.write(g),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(g){this.listeners.data.slice(0).forEach(E=>E(g))}emitError(g){this.listeners.error.length===0?(0,u.onUnexpectedError)(g):this.listeners.error.slice(0).forEach(E=>E(g))}emitEnd(){this.listeners.end.slice(0).forEach(g=>g())}on(g,E){if(!this.state.destroyed)switch(g){case"data":this.listeners.data.push(E),this.resume();break;case"end":this.listeners.end.push(E),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(E),this.state.flowing&&this.flowErrors();break}}removeListener(g,E){if(this.state.destroyed)return;let R;switch(g){case"data":R=this.listeners.data;break;case"end":R=this.listeners.end;break;case"error":R=this.listeners.error;break}if(R){const w=R.indexOf(E);w>=0&&R.splice(w,1)}}flowData(){if(this.buffer.data.length>0){const g=this.reducer(this.buffer.data);this.emitData(g),this.buffer.data.length=0;const E=[...this.pendingWritePromises];this.pendingWritePromises.length=0,E.forEach(R=>R())}}flowErrors(){if(this.listeners.error.length>0){for(const g of this.buffer.error)this.emitError(g);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function c(T,g){const E=[];let R;for(;(R=T.read())!==null;)E.push(R);return g(E)}t.consumeReadable=c;function a(T,g,E){const R=[];let w;for(;(w=T.read())!==null&&R.length<E;)R.push(w);return w===null&&R.length>0?g(R):{read:()=>{if(R.length>0)return R.shift();if(typeof w!="undefined"){const i=w;return w=void 0,i}return T.read()}}}t.peekReadable=a;function y(T,g){return new Promise((E,R)=>{const w=[];U(T,{onData:i=>{g&&w.push(i)},onError:i=>{g?R(i):E(void 0)},onEnd:()=>{E(g?g(w):void 0)}})})}t.consumeStream=y;function U(T,g){T.on("error",E=>g.onError(E)),T.on("end",()=>g.onEnd()),T.on("data",E=>g.onData(E))}t.listenStream=U;function F(T,g){return new Promise((E,R)=>{const w=new P.DisposableStore,i=[],e=o=>{if(i.push(o),i.length>g)return w.dispose(),T.pause(),E({stream:T,buffer:i,ended:!1})},r=o=>R(o),n=()=>E({stream:T,buffer:i,ended:!0});w.add((0,P.toDisposable)(()=>T.removeListener("error",r))),T.on("error",r),w.add((0,P.toDisposable)(()=>T.removeListener("end",n))),T.on("end",n),w.add((0,P.toDisposable)(()=>T.removeListener("data",e))),T.on("data",e)})}t.peekStream=F;function L(T,g){const E=d(g);return E.end(T),E}t.toStream=L;function l(){const T=d(()=>{throw new Error("not supported")});return T.end(),T}t.emptyStream=l;function b(T){let g=!1;return{read:()=>g?null:(g=!0,T)}}t.toReadable=b;function D(T,g,E){const R=d(E);return U(T,{onData:w=>R.write(g.data(w)),onError:w=>R.error(g.error?g.error(w):w),onEnd:()=>R.end()}),R}t.transform=D;function M(T,g,E){let R=!1;return{read:()=>{const w=g.read();return R?w:(R=!0,w!==null?E([T,w]):T)}}}t.prefixedReadable=M;function N(T,g,E){let R=!1;const w=d(E);return U(g,{onData:i=>R?w.write(i):(R=!0,w.write(E([T,i]))),onError:i=>w.error(i),onEnd:()=>{R||(R=!0,w.write(T)),w.end()}}),w}t.prefixedStream=N}),define(V[14],H([0,1,12]),function(z,t,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedBufferStream=t.prefixedBufferReadable=t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.bufferedStreamToBuffer=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const P=typeof Buffer!="undefined";let h,I;class d{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static alloc(e){return P?new d(Buffer.allocUnsafe(e)):new d(new Uint8Array(e))}static wrap(e){return P&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new d(e)}static fromString(e,r){return!(r?.dontUseNodeBuffer||!1)&&P?new d(Buffer.from(e)):(h||(h=new TextEncoder),new d(h.encode(e)))}static fromByteArray(e){const r=d.alloc(e.length);for(let n=0,o=e.length;n<o;n++)r.buffer[n]=e[n];return r}static concat(e,r){if(typeof r=="undefined"){r=0;for(let f=0,S=e.length;f<S;f++)r+=e[f].byteLength}const n=d.alloc(r);let o=0;for(let f=0,S=e.length;f<S;f++){const C=e[f];n.set(C,o),o+=C.byteLength}return n}clone(){const e=d.alloc(this.byteLength);return e.set(this),e}toString(){return P?this.buffer.toString():(I||(I=new TextDecoder),I.decode(this.buffer))}slice(e,r){return new d(this.buffer.subarray(e,r))}set(e,r){if(e instanceof d)this.buffer.set(e.buffer,r);else if(e instanceof Uint8Array)this.buffer.set(e,r);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),r);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r);else throw new Error("Unkown argument 'array'")}readUInt32BE(e){return a(this.buffer,e)}writeUInt32BE(e,r){y(this.buffer,e,r)}readUInt32LE(e){return U(this.buffer,e)}writeUInt32LE(e,r){F(this.buffer,e,r)}readUInt8(e){return L(this.buffer,e)}writeUInt8(e,r){l(this.buffer,e,r)}}t.VSBuffer=d;function v(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}t.readUInt16LE=v;function c(i,e,r){i[r+0]=e&255,e=e>>>8,i[r+1]=e&255}t.writeUInt16LE=c;function a(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}t.readUInt32BE=a;function y(i,e,r){i[r+3]=e,e=e>>>8,i[r+2]=e,e=e>>>8,i[r+1]=e,e=e>>>8,i[r]=e}t.writeUInt32BE=y;function U(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0|i[e+2]<<16>>>0|i[e+3]<<24>>>0}t.readUInt32LE=U;function F(i,e,r){i[r+0]=e&255,e=e>>>8,i[r+1]=e&255,e=e>>>8,i[r+2]=e&255,e=e>>>8,i[r+3]=e&255}t.writeUInt32LE=F;function L(i,e){return i[e]}t.readUInt8=L;function l(i,e,r){i[r]=e}t.writeUInt8=l;function b(i){return u.consumeReadable(i,e=>d.concat(e))}t.readableToBuffer=b;function D(i){return u.toReadable(i)}t.bufferToReadable=D;function M(i){return u.consumeStream(i,e=>d.concat(e))}t.streamToBuffer=M;async function N(i){return i.ended?d.concat(i.buffer):d.concat([...i.buffer,await M(i.stream)])}t.bufferedStreamToBuffer=N;function T(i){return u.toStream(i,e=>d.concat(e))}t.bufferToStream=T;function g(i){return u.transform(i,{data:e=>typeof e=="string"?d.fromString(e):d.wrap(e)},e=>d.concat(e))}t.streamToBufferReadableStream=g;function E(i){return u.newWriteableStream(e=>d.concat(e),i)}t.newWriteableBufferStream=E;function R(i,e){return u.prefixedReadable(i,e,r=>d.concat(r))}t.prefixedBufferReadable=R;function w(i,e){return u.prefixedStream(i,e,r=>d.concat(r))}t.prefixedBufferStream=w});var re=this&&this.__classPrivateFieldSet||function(z,t,u,P,h){if(P==="m")throw new TypeError("Private method is not writable");if(P==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?z!==t||!h:!t.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return P==="a"?h.call(z,u):h?h.value=u:t.set(z,u),u},x=this&&this.__classPrivateFieldGet||function(z,t,u,P){if(u==="a"&&!P)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?z!==t||!P:!t.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return u==="m"?P:u==="a"?P.call(z):P?P.value:t.get(z)};define(V[15],H([0,1,16,8]),function(z,t,u,P){"use strict";var h,I,d;Object.defineProperty(t,"__esModule",{value:!0}),t.ReadonlyMapView=t.LRUCache=t.LinkedMap=t.Touch=t.ResourceMap=t.TernarySearchTree=t.UriIterator=t.PathIterator=t.ConfigKeysIterator=t.StringIterator=t.setToString=t.mapToString=t.getOrSet=void 0;function v(i,e,r){let n=i.get(e);return n===void 0&&(n=r,i.set(e,n)),n}t.getOrSet=v;function c(i){const e=[];return i.forEach((r,n)=>{e.push(`${n} => ${r}`)}),`Map(${i.size}) {${e.join(", ")}}`}t.mapToString=c;function a(i){const e=[];return i.forEach(r=>{e.push(r)}),`Set(${i.size}) {${e.join(", ")}}`}t.setToString=a;class y{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}t.StringIterator=y;class U{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?(0,P.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,P.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.ConfigKeysIterator=U;class F{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?(0,P.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,P.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=F;var L;(function(i){i[i.Scheme=1]="Scheme",i[i.Authority=2]="Authority",i[i.Path=3]="Path",i[i.Query=4]="Query",i[i.Fragment=5]="Fragment"})(L||(L={}));class l{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new F(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return(0,P.compareIgnoreCase)(e,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,P.compareIgnoreCase)(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return(0,P.compare)(e,this._value.query);if(this._states[this._stateIdx]===5)return(0,P.compare)(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}t.UriIterator=l;class b{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var D;(function(i){i[i.Left=-1]="Left",i[i.Mid=0]="Mid",i[i.Right=1]="Right"})(D||(D={}));class M{constructor(e){this._iter=e}static forUris(e=()=>!1){return new M(new l(e))}static forPaths(){return new M(new F)}static forStrings(){return new M(new y)}static forConfigKeys(){return new M(new U)}clear(){this._root=void 0}fill(e,r){if(r){const n=r.slice(0);(0,u.shuffle)(n);for(let o of n)this.set(o,e)}else{const n=e.slice(0);(0,u.shuffle)(n);for(let o of n)this.set(o[0],o[1])}}set(e,r){const n=this._iter.reset(e);let o;this._root||(this._root=new b,this._root.segment=n.value());const f=[];for(o=this._root;;){const C=n.cmp(o.segment);if(C>0)o.left||(o.left=new b,o.left.segment=n.value()),f.push([-1,o]),o=o.left;else if(C<0)o.right||(o.right=new b,o.right.segment=n.value()),f.push([1,o]),o=o.right;else if(n.hasNext())n.next(),o.mid||(o.mid=new b,o.mid.segment=n.value()),f.push([0,o]),o=o.mid;else break}const S=o.value;o.value=r,o.key=e;for(let C=f.length-1;C>=0;C--){const $=f[C][1];$.updateHeight();const Q=$.balanceFactor();if(Q<-1||Q>1){const J=f[C][0],Z=f[C+1][0];if(J===1&&Z===1)f[C][1]=$.rotateLeft();else if(J===-1&&Z===-1)f[C][1]=$.rotateRight();else if(J===1&&Z===-1)$.right=f[C+1][1]=f[C+1][1].rotateRight(),f[C][1]=$.rotateLeft();else if(J===-1&&Z===1)$.left=f[C+1][1]=f[C+1][1].rotateLeft(),f[C][1]=$.rotateRight();else throw new Error;if(C>0)switch(f[C-1][0]){case-1:f[C-1][1].left=f[C][1];break;case 1:f[C-1][1].right=f[C][1];break;case 0:f[C-1][1].mid=f[C][1];break}else this._root=f[0][1]}}return S}get(e){return this._getNode(e)?.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const o=r.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!(r?.value===void 0&&r?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),o=[];let f=this._root;for(;f;){const S=n.cmp(f.segment);if(S>0)o.push([-1,f]),f=f.left;else if(S<0)o.push([1,f]),f=f.right;else if(n.hasNext())n.next(),o.push([0,f]),f=f.mid;else break}if(!!f){if(r?(f.left=void 0,f.mid=void 0,f.right=void 0,f.height=1):(f.key=void 0,f.value=void 0),!f.mid&&!f.value)if(f.left&&f.right){const S=this._min(f.right),{key:C,value:$,segment:Q}=S;this._delete(S.key,!1),f.key=C,f.value=$,f.segment=Q}else{const S=f.left??f.right;if(o.length>0){const[C,$]=o[o.length-1];switch(C){case-1:$.left=S;break;case 0:$.mid=S;break;case 1:$.right=S;break}}else this._root=S}for(let S=o.length-1;S>=0;S--){const C=o[S][1];C.updateHeight();const $=C.balanceFactor();if($>1?(C.right.balanceFactor()>=0||(C.right=o[S+1][1]=o[S+1][1].rotateRight()),o[S][1]=C.rotateLeft()):$<-1&&(C.left.balanceFactor()<=0||(C.left=o[S+1][1]=o[S+1][1].rotateLeft()),o[S][1]=C.rotateRight()),S>0)switch(o[S-1][0]){case-1:o[S-1][1].left=o[S][1];break;case 1:o[S-1][1].right=o[S][1];break;case 0:o[S-1][1].mid=o[S][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const r=this._iter.reset(e);let n=this._root,o;for(;n;){const f=r.cmp(n.segment);if(f>0)n=n.left;else if(f<0)n=n.right;else if(r.hasNext())r.next(),o=n.value||o,n=n.mid;else break}return n&&n.value||o}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const o=r.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){!e||(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}_isBalanced(){const e=r=>{if(!r)return!0;const n=r.balanceFactor();return n<-1||n>1?!1:e(r.left)&&e(r.right)};return e(this._root)}}t.TernarySearchTree=M;class N{constructor(e,r){this.uri=e,this.value=r}}class T{constructor(e,r){this[h]="ResourceMap",e instanceof T?(this.map=new Map(e.map),this.toKey=r??T.defaultToKey):(this.map=new Map,this.toKey=e??T.defaultToKey)}set(e,r){return this.map.set(this.toKey(e),new N(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r!="undefined"&&(e=e.bind(r));for(let[n,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(h=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}t.ResourceMap=T,T.defaultToKey=i=>i.toString();var g;(function(i){i[i.None=0]="None",i[i.AsOld=1]="AsOld",i[i.AsNew=2]="AsNew"})(g=t.Touch||(t.Touch={}));class E{constructor(){this[I]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){const n=this._map.get(e);if(!!n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let o=this._map.get(e);if(o)o.value=r,n!==0&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){const n=this._state;let o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){const e=this,r=this._state;let n=this._head;const o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){const f={value:n.key,done:!1};return n=n.next,f}else return{value:void 0,done:!0}}};return o}values(){const e=this,r=this._state;let n=this._head;const o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){const f={value:n.value,done:!1};return n=n.next,f}else return{value:void 0,done:!0}}};return o}entries(){const e=this,r=this._state;let n=this._head;const o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){const f={value:[n.key,n.value],done:!1};return n=n.next,f}else return{value:void 0,done:!0}}};return o}[(I=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;const n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;const n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(const[r,n]of e)this.set(r,n)}}t.LinkedMap=E;class R extends E{constructor(e,r=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=R;class w{constructor(e){d.set(this,void 0),re(this,d,e,"f")}get size(){return x(this,d,"f").size}forEach(e,r){x(this,d,"f").forEach(e,r)}get(e){return x(this,d,"f").get(e)}has(e){return x(this,d,"f").has(e)}entries(){return x(this,d,"f").entries()}keys(){return x(this,d,"f").keys()}values(){return x(this,d,"f").values()}[(d=new WeakMap,Symbol.iterator)](){return x(this,d,"f").entries()}}t.ReadonlyMapView=w}),define(V[17],H([0,1,15]),function(z,t,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAccents=t.normalizeNFD=t.normalizeNFC=void 0;const P=new u.LRUCache(1e4);function h(a){return c(a,"NFC",P)}t.normalizeNFC=h;const I=new u.LRUCache(1e4);function d(a){return c(a,"NFD",I)}t.normalizeNFD=d;const v=/[^\u0000-\u0080]/;function c(a,y,U){if(!a)return a;const F=U.get(a);if(F)return F;let L;return v.test(a)?L=a.normalize(y):L=a,U.set(a,L),L}t.removeAccents=function(){const a=/[\u0300-\u036f]/g;return function(y){return d(y).replace(a,"")}}()}),define(V[3],H([0,1,4,2,8,5]),function(z,t,u,P,h,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function d(i){return i===47||i===92}t.isPathSeparator=d;function v(i){return i.replace(/[\\/]/g,u.posix.sep)}t.toSlashes=v;function c(i){return i.indexOf("/")===-1&&(i=v(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}t.toPosixPath=c;function a(i,e=u.posix.sep){if(!i)return"";const r=i.length,n=i.charCodeAt(0);if(d(n)){if(d(i.charCodeAt(1))&&!d(i.charCodeAt(2))){let f=3;const S=f;for(;f<r&&!d(i.charCodeAt(f));f++);if(S!==f&&!d(i.charCodeAt(f+1))){for(f+=1;f<r;f++)if(d(i.charCodeAt(f)))return i.slice(0,f+1).replace(/[\\/]/g,e)}}return e}else if(M(n)&&i.charCodeAt(1)===58)return d(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let o=i.indexOf("://");if(o!==-1){for(o+=3;o<r;o++)if(d(i.charCodeAt(o)))return i.slice(0,o+1)}return""}t.getRoot=a;function y(i){if(!P.isWindows||!i||i.length<5)return!1;let e=i.charCodeAt(0);if(e!==92||(e=i.charCodeAt(1),e!==92))return!1;let r=2;const n=r;for(;r<i.length&&(e=i.charCodeAt(r),e!==92);r++);return!(n===r||(e=i.charCodeAt(r+1),isNaN(e)||e===92))}t.isUNC=y;const U=/[\\/:\*\?"<>\|]/g,F=/[\\/]/g,L=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function l(i,e=P.isWindows){const r=e?U:F;return!(!i||i.length===0||/^\s+$/.test(i)||(r.lastIndex=0,r.test(i))||e&&L.test(i)||i==="."||i===".."||e&&i[i.length-1]==="."||e&&i.length!==i.trim().length||i.length>255)}t.isValidBasename=l;function b(i,e,r){const n=i===e;return!r||n?n:!i||!e?!1:(0,h.equalsIgnoreCase)(i,e)}t.isEqual=b;function D(i,e,r,n=u.sep){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(r){if(!(0,h.startsWithIgnoreCase)(i,e))return!1;if(e.length===i.length)return!0;let f=e.length;return e.charAt(e.length-1)===n&&f--,i.charAt(f)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}t.isEqualOrParent=D;function M(i){return i>=65&&i<=90||i>=97&&i<=122}t.isWindowsDriveLetter=M;function N(i,e){return P.isWindows&&i.endsWith(":")&&(i+=u.sep),(0,u.isAbsolute)(i)||(i=(0,u.join)(e,i)),i=(0,u.normalize)(i),P.isWindows?(i=(0,h.rtrim)(i,u.sep),i.endsWith(":")&&(i+=u.sep)):(i=(0,h.rtrim)(i,u.sep),i||(i=u.sep)),i}t.sanitizeFilePath=N;function T(i){const e=(0,u.normalize)(i);return P.isWindows?i.length>3?!1:g(e)&&(i.length===2||e.charCodeAt(2)===92):e===u.posix.sep}t.isRootOrDriveLetter=T;function g(i,e){return(e!==void 0?e:P.isWindows)?M(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}t.hasDriveLetter=g;function E(i){return g(i)?i[0]:void 0}t.getDriveLetter=E;function R(i,e,r){return e.length>i.length?-1:i===e?0:(r&&(i=i.toLowerCase(),e=e.toLowerCase()),i.indexOf(e))}t.indexOfPath=R;function w(i){const e=i.split(":");let r,n,o;if(e.forEach(f=>{const S=Number(f);(0,I.isNumber)(S)?n===void 0?n=S:o===void 0&&(o=S):r=r?[r,f].join(":"):f}),!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:n!==void 0?n:void 0,column:o!==void 0?o:n!==void 0?1:void 0}}t.parseLineAndColumnAware=w}),define(V[18],H([0,1,6]),function(z,t,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.getFirstFrame=t.parse=t.isRemoteConsoleLog=void 0;function P(a){const y=a;return y&&typeof y.type=="string"&&typeof y.severity=="string"}t.isRemoteConsoleLog=P;function h(a){const y=[];let U;try{const F=JSON.parse(a.arguments),L=F[F.length-1];L&&L.__$stack&&(F.pop(),U=L.__$stack),y.push(...F)}catch(F){y.push("Unable to log remote console arguments",a.arguments)}return{args:y,stack:U}}t.parse=h;function I(a){if(typeof a!="string")return I(h(a).stack);const y=a;if(y){const U=d(y),F=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(U||"");if(F&&F.length===4)return{uri:u.URI.file(F[1]),line:Number(F[2]),column:Number(F[3])}}}t.getFirstFrame=I;function d(a){if(!a)return a;const y=a.indexOf(`
`);return y===-1?a:a.substring(0,y)}function v(a,y){const{args:U,stack:F}=h(a),L=typeof U[0]=="string"&&U.length===1;let l=d(F);l&&(l=`(${l.trim()})`);let b=[];if(typeof U[0]=="string"?l&&L?b=[`%c[${y}] %c${U[0]} %c${l}`,c("blue"),c(""),c("grey")]:b=[`%c[${y}] %c${U[0]}`,c("blue"),c(""),...U.slice(1)]:b=[`%c[${y}]%`,c("blue"),...U],l&&!L&&b.push(l),typeof console[a.severity]!="function")throw new Error("Unknown console method");console[a.severity].apply(console,b)}t.log=v;function c(a){return`color: ${a}`}}),define(V[9],H([0,1,2,6]),function(z,t,u,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileAccess=t.RemoteAuthorities=t.Schemas=void 0;var h;(function(v){v.inMemory="inmemory",v.vscode="vscode",v.internal="private",v.walkThrough="walkThrough",v.walkThroughSnippet="walkThroughSnippet",v.http="http",v.https="https",v.file="file",v.mailto="mailto",v.untitled="untitled",v.data="data",v.command="command",v.vscodeRemote="vscode-remote",v.vscodeRemoteResource="vscode-remote-resource",v.userData="vscode-userdata",v.vscodeCustomEditor="vscode-custom-editor",v.vscodeNotebook="vscode-notebook",v.vscodeNotebookCell="vscode-notebook-cell",v.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",v.vscodeNotebookCellOutput="vscode-notebook-cell-output",v.vscodeInteractive="vscode-interactive",v.vscodeInteractiveInput="vscode-interactive-input",v.vscodeSettings="vscode-settings",v.vscodeWorkspaceTrust="vscode-workspace-trust",v.vscodeTerminal="vscode-terminal",v.webviewPanel="webview-panel",v.vscodeWebview="vscode-webview",v.extension="extension",v.vscodeFileResource="vscode-file",v.tmp="tmp",v.vsls="vsls"})(h=t.Schemas||(t.Schemas={}));class I{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(c){this._preferredWebSchema=c}setDelegate(c){this._delegate=c}set(c,a,y){this._hosts[c]=a,this._ports[c]=y}setConnectionToken(c,a){this._connectionTokens[c]=a}rewrite(c){if(this._delegate)return this._delegate(c);const a=c.authority;let y=this._hosts[a];y&&y.indexOf(":")!==-1&&(y=`[${y}]`);const U=this._ports[a],F=this._connectionTokens[a];let L=`path=${encodeURIComponent(c.path)}`;return typeof F=="string"&&(L+=`&tkn=${encodeURIComponent(F)}`),P.URI.from({scheme:u.isWeb?this._preferredWebSchema:h.vscodeRemoteResource,authority:`${y}:${U}`,path:"/vscode-remote-resource",query:L})}}t.RemoteAuthorities=new I;class d{asBrowserUri(c,a){const y=this.toUri(c,a);return y.scheme===h.vscodeRemote?t.RemoteAuthorities.rewrite(y):y.scheme===h.file&&(u.isNative||typeof u.globals.importScripts=="function"&&u.globals.origin===`${h.vscodeFileResource}://${d.FALLBACK_AUTHORITY}`)?y.with({scheme:h.vscodeFileResource,authority:y.authority||d.FALLBACK_AUTHORITY,query:null,fragment:null}):y}asFileUri(c,a){const y=this.toUri(c,a);return y.scheme===h.vscodeFileResource?y.with({scheme:h.file,authority:y.authority!==d.FALLBACK_AUTHORITY?y.authority:null,query:null,fragment:null}):y}toUri(c,a){return P.URI.isUri(c)?c:P.URI.parse(a.toUrl(c))}}d.FALLBACK_AUTHORITY="vscode-app",t.FileAccess=new d}),define(V[10],H([0,1,3,9,4,2,8,6]),function(z,t,u,P,h,I,d,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function c(L){return(0,v.uriToFsPath)(L,!0)}t.originalFSPath=c;class a{constructor(l){this._ignorePathCasing=l}compare(l,b,D=!1){return l===b?0:(0,d.compare)(this.getComparisonKey(l,D),this.getComparisonKey(b,D))}isEqual(l,b,D=!1){return l===b?!0:!l||!b?!1:this.getComparisonKey(l,D)===this.getComparisonKey(b,D)}getComparisonKey(l,b=!1){return l.with({path:this._ignorePathCasing(l)?l.path.toLowerCase():void 0,fragment:b?null:void 0}).toString()}ignorePathCasing(l){return this._ignorePathCasing(l)}isEqualOrParent(l,b,D=!1){if(l.scheme===b.scheme){if(l.scheme===P.Schemas.file)return u.isEqualOrParent(c(l),c(b),this._ignorePathCasing(l))&&l.query===b.query&&(D||l.fragment===b.fragment);if((0,t.isEqualAuthority)(l.authority,b.authority))return u.isEqualOrParent(l.path,b.path,this._ignorePathCasing(l),"/")&&l.query===b.query&&(D||l.fragment===b.fragment)}return!1}joinPath(l,...b){return v.URI.joinPath(l,...b)}basenameOrAuthority(l){return(0,t.basename)(l)||l.authority}basename(l){return h.posix.basename(l.path)}extname(l){return h.posix.extname(l.path)}dirname(l){if(l.path.length===0)return l;let b;return l.scheme===P.Schemas.file?b=v.URI.file(h.dirname(c(l))).path:(b=h.posix.dirname(l.path),l.authority&&b.length&&b.charCodeAt(0)!==47&&(console.error(`dirname("${l.toString})) resulted in a relative path`),b="/")),l.with({path:b})}normalizePath(l){if(!l.path.length)return l;let b;return l.scheme===P.Schemas.file?b=v.URI.file(h.normalize(c(l))).path:b=h.posix.normalize(l.path),l.with({path:b})}relativePath(l,b){if(l.scheme!==b.scheme||!(0,t.isEqualAuthority)(l.authority,b.authority))return;if(l.scheme===P.Schemas.file){const N=h.relative(c(l),c(b));return I.isWindows?u.toSlashes(N):N}let D=l.path||"/",M=b.path||"/";if(this._ignorePathCasing(l)){let N=0;for(const T=Math.min(D.length,M.length);N<T&&!(D.charCodeAt(N)!==M.charCodeAt(N)&&D.charAt(N).toLowerCase()!==M.charAt(N).toLowerCase());N++);D=M.substr(0,N)+D.substr(N)}return h.posix.relative(D,M)}resolvePath(l,b){if(l.scheme===P.Schemas.file){const D=v.URI.file(h.resolve(c(l),b));return l.with({authority:D.authority,path:D.path})}return b=u.toPosixPath(b),l.with({path:h.posix.resolve(l.path,b)})}isAbsolutePath(l){return!!l.path&&l.path[0]==="/"}isEqualAuthority(l,b){return l===b||l!==void 0&&b!==void 0&&(0,d.equalsIgnoreCase)(l,b)}hasTrailingPathSeparator(l,b=h.sep){if(l.scheme===P.Schemas.file){const D=c(l);return D.length>u.getRoot(D).length&&D[D.length-1]===b}else{const D=l.path;return D.length>1&&D.charCodeAt(D.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(l.fsPath)}}removeTrailingPathSeparator(l,b=h.sep){return(0,t.hasTrailingPathSeparator)(l,b)?l.with({path:l.path.substr(0,l.path.length-1)}):l}addTrailingPathSeparator(l,b=h.sep){let D=!1;if(l.scheme===P.Schemas.file){const M=c(l);D=M!==void 0&&M.length===u.getRoot(M).length&&M[M.length-1]===b}else{b="/";const M=l.path;D=M.length===1&&M.charCodeAt(M.length-1)===47}return!D&&!(0,t.hasTrailingPathSeparator)(l,b)?l.with({path:l.path+"/"}):l}}t.ExtUri=a,t.extUri=new a(()=>!1),t.extUriBiasedIgnorePathCase=new a(L=>L.scheme===P.Schemas.file?!I.isLinux:!0),t.extUriIgnorePathCase=new a(L=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function y(L,l){const b=[];for(let D=0;D<L.length;D++){const M=l(L[D]);L.some((N,T)=>T===D?!1:(0,t.isEqualOrParent)(M,l(N)))||b.push(L[D])}return b}t.distinctParents=y;var U;(function(L){L.META_DATA_LABEL="label",L.META_DATA_DESCRIPTION="description",L.META_DATA_SIZE="size",L.META_DATA_MIME="mime";function l(b){const D=new Map;b.path.substring(b.path.indexOf(";")+1,b.path.lastIndexOf(";")).split(";").forEach(T=>{const[g,E]=T.split(":");g&&E&&D.set(g,E)});const N=b.path.substring(0,b.path.indexOf(";"));return N&&D.set(L.META_DATA_MIME,N),D}L.parseMetaData=l})(U=t.DataUri||(t.DataUri={}));function F(L,l,b){if(l){let D=L.path;return D&&D[0]!==h.posix.sep&&(D=h.posix.sep+D),L.with({scheme:b,authority:l,path:D})}return L.with({scheme:b})}t.toLocalResource=F}),define(V[19],H([0,1,35,13,20,7,10,2]),function(z,t,u,P,h,I,d,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function c(p){return!!p&&typeof p.then=="function"}t.isThenable=c;function a(p){const s=new u.CancellationTokenSource,m=p(s.token),_=new Promise((A,B)=>{const Y=s.token.onCancellationRequested(()=>{Y.dispose(),s.dispose(),B((0,P.canceled)())});Promise.resolve(m).then(X=>{Y.dispose(),s.dispose(),A(X)},X=>{Y.dispose(),s.dispose(),B(X)})});return new class{cancel(){s.cancel()}then(A,B){return _.then(A,B)}catch(A){return this.then(void 0,A)}finally(A){return _.finally(A)}}}t.createCancelablePromise=a;function y(p,s,m){return Promise.race([p,new Promise(_=>s.onCancellationRequested(()=>_(m)))])}t.raceCancellation=y;async function U(p){let s=-1;const m=p.map((A,B)=>A.then(Y=>(s=B,Y))),_=await Promise.race(m);return p.forEach((A,B)=>{B!==s&&A.cancel()}),_}t.raceCancellablePromises=U;function F(p,s,m){let _;const A=setTimeout(()=>{_?.(void 0),m?.()},s);return Promise.race([p.finally(()=>clearTimeout(A)),new Promise(B=>_=B)])}t.raceTimeout=F;function L(p){return new Promise((s,m)=>{const _=p();c(_)?_.then(s,m):s(_)})}t.asPromise=L;class l{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(s){if(this.activePromise){if(this.queuedPromiseFactory=s,!this.queuedPromise){const m=()=>{this.queuedPromise=null;const _=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,_};this.queuedPromise=new Promise(_=>{this.activePromise.then(m,m).then(_)})}return new Promise((m,_)=>{this.queuedPromise.then(m,_)})}return this.activePromise=s(),new Promise((m,_)=>{this.activePromise.then(A=>{this.activePromise=null,m(A)},A=>{this.activePromise=null,_(A)})})}}t.Throttler=l;class b{constructor(){this.current=Promise.resolve(null)}queue(s){return this.current=this.current.then(()=>s(),()=>s())}}t.Sequencer=b;class D{constructor(){this.promiseMap=new Map}queue(s,m){const A=(this.promiseMap.get(s)??Promise.resolve()).catch(()=>{}).then(m).finally(()=>{this.promiseMap.get(s)===A&&this.promiseMap.delete(s)});return this.promiseMap.set(s,A),A}}t.SequencerByKey=D;class M{constructor(s){this.defaultDelay=s,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(s,m=this.defaultDelay){return this.task=s,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((_,A)=>{this.doResolve=_,this.doReject=A}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const _=this.task;return this.task=null,_()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},m),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject((0,P.canceled)()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}t.Delayer=M;class N{constructor(s){this.delayer=new M(s),this.throttler=new l}trigger(s,m){return this.delayer.trigger(()=>this.throttler.queue(s),m)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=N;class T{constructor(){this._isOpen=!1,this._promise=new Promise((s,m)=>{this._completePromise=s})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=T;class g extends T{constructor(s){super();this._timeout=setTimeout(()=>this.open(),s)}open(){clearTimeout(this._timeout),super.open()}}t.AutoOpenBarrier=g;function E(p,s){return s?new Promise((m,_)=>{const A=setTimeout(()=>{B.dispose(),m()},p),B=s.onCancellationRequested(()=>{clearTimeout(A),B.dispose(),_((0,P.canceled)())})}):a(m=>E(p,m))}t.timeout=E;function R(p,s=0){const m=setTimeout(p,s);return(0,I.toDisposable)(()=>clearTimeout(m))}t.disposableTimeout=R;function w(p){const s=[];let m=0;const _=p.length;function A(){return m<_?p[m++]():null}function B(Y){Y!=null&&s.push(Y);const X=A();return X?X.then(B):Promise.resolve(s)}return Promise.resolve(null).then(B)}t.sequence=w;function i(p,s=_=>!!_,m=null){let _=0;const A=p.length,B=()=>{if(_>=A)return Promise.resolve(m);const Y=p[_++];return Promise.resolve(Y()).then(ee=>s(ee)?Promise.resolve(ee):B())};return B()}t.first=i;function e(p,s=_=>!!_,m=null){if(p.length===0)return Promise.resolve(m);let _=p.length;const A=()=>{_=-1;for(const B of p)B.cancel?.()};return new Promise((B,Y)=>{for(const X of p)X.then(ee=>{--_>=0&&s(ee)?(A(),B(ee)):_===0&&B(m)}).catch(ee=>{--_>=0&&(A(),Y(ee))})})}t.firstParallel=e;class r{constructor(s){this._size=0,this.maxDegreeOfParalellism=s,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new h.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(s){return this._size++,new Promise((m,_)=>{this.outstandingPromises.push({factory:s,c:m,e:_}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const s=this.outstandingPromises.shift();this.runningPromises++;const m=s.factory();m.then(s.c,s.e),m.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}t.Limiter=r;class n extends r{constructor(){super(1)}}t.Queue=n;class o{constructor(){this.queues=new Map}queueFor(s,m=d.extUri){const _=m.getComparisonKey(s);let A=this.queues.get(_);return A||(A=new n,h.Event.once(A.onFinished)(()=>{A?.dispose(),this.queues.delete(_)}),this.queues.set(_,A)),A}dispose(){this.queues.forEach(s=>s.dispose()),this.queues.clear()}}t.ResourceQueue=o;class f{constructor(s,m){this._token=-1,typeof s=="function"&&typeof m=="number"&&this.setIfNotSet(s,m)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(s,m){this.cancel(),this._token=setTimeout(()=>{this._token=-1,s()},m)}setIfNotSet(s,m){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,s()},m))}}t.TimeoutTimer=f;class S{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(s,m){this.cancel(),this._token=setInterval(()=>{s()},m)}}t.IntervalTimer=S;class C{constructor(s,m){this.timeoutToken=-1,this.runner=s,this.timeout=m,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(s=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,s)}get delay(){return this.timeout}set delay(s){this.timeout=s}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=C;class ${constructor(s,m){m%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${m}ms is not a multiple of 1000ms.`),this.runner=s,this.timeout=m,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(s=this.timeout){s%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${s}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(s/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}t.ProcessTimeRunOnceScheduler=$;class Q extends C{constructor(s,m){super(s,m);this.units=[]}work(s){this.units.push(s),this.isScheduled()||this.schedule()}doRun(){const s=this.units;this.units=[],this.runner&&this.runner(s)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=Q;class J extends I.Disposable{constructor(s,m,_,A){super();this.maxWorkChunkSize=s,this.maxPendingWork=m,this.throttleDelay=_,this.handler=A,this.pendingWork=[],this.throttler=this._register(new I.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(s){if(this.disposed)return!1;if(typeof this.maxPendingWork=="number"){if(this.throttler.value){if(this.pending+s.length>this.maxPendingWork)return!1}else if(this.pending+s.length-this.maxWorkChunkSize>this.maxPendingWork)return!1}return this.pendingWork.push(...s),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new C(()=>{this.throttler.clear(),this.doWork()},this.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}t.ThrottledWorker=J,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=p=>{(0,v.setTimeout0)(()=>{if(s)return;const m=Date.now()+3;p(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,m-Date.now())}}))});let s=!1;return{dispose(){s||(s=!0)}}}:t.runWhenIdle=(p,s)=>{const m=requestIdleCallback(p,typeof s=="number"?{timeout:s}:void 0);let _=!1;return{dispose(){_||(_=!0,cancelIdleCallback(m))}}}}();class Z{constructor(s){this._didRun=!1,this._executor=()=>{try{this._value=s()}catch(m){this._error=m}finally{this._didRun=!0}},this._handle=(0,t.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}t.IdleValue=Z;async function te(p,s,m){let _;for(let A=0;A<m;A++)try{return await p()}catch(B){_=B,await E(s)}throw _}t.retry=te;class ie{hasPending(s){return this._pending?typeof s=="number"?this._pending.taskId===s:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(s,m,_){return this._pending={taskId:s,cancel:()=>_?.(),promise:m},m.then(()=>this.donePending(s),()=>this.donePending(s)),m}donePending(s){this._pending&&s===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const s=this._next;this._next=void 0,s.run().then(s.promiseResolve,s.promiseReject)}}setNext(s){if(this._next)this._next.run=s;else{let m,_;const A=new Promise((B,Y)=>{m=B,_=Y});this._next={run:s,promise:A,promiseResolve:m,promiseReject:_}}return this._next.promise}}t.TaskSequentializer=ie;class k{constructor(s,m=()=>Date.now()){this.interval=s,this.nowFn=m,this.lastIncrementTime=0,this.value=0}increment(){const s=this.nowFn();return s-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=s,this.value=0),this.value++,this.value}}t.IntervalCounter=k;class O{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((s,m)=>{this.completeCallback=s,this.errorCallback=m})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(s){return new Promise(m=>{this.completeCallback(s),this.resolved=!0,m()})}error(s){return new Promise(m=>{this.errorCallback(s),this.rejected=!0,m()})}cancel(){new Promise(s=>{this.errorCallback((0,P.canceled)()),this.rejected=!0,s()})}}t.DeferredPromise=O;var j;(function(p){async function s(_){let A;const B=await Promise.all(_.map(Y=>Y.then(X=>X,X=>{A||(A=X)})));if(typeof A!="undefined")throw A;return B}p.settled=s;function m(_){return new Promise(async(A,B)=>{try{await _(A,B)}catch(Y){B(Y)}})}p.withAsyncBody=m})(j=t.Promises||(t.Promises={}));var W;(function(p){p[p.Initial=0]="Initial",p[p.DoneOK=1]="DoneOK",p[p.DoneError=2]="DoneError"})(W||(W={}));class q{constructor(s){this._state=0,this._results=[],this._error=null,this._onStateChanged=new h.Emitter,queueMicrotask(async()=>{const m={emitOne:_=>this.emitOne(_),emitMany:_=>this.emitMany(_),reject:_=>this.reject(_)};try{await Promise.resolve(s(m)),this.resolve()}catch(_){this.reject(_)}finally{m.emitOne=void 0,m.emitMany=void 0,m.reject=void 0}})}static fromArray(s){return new q(m=>{m.emitMany(s)})}static fromPromise(s){return new q(async m=>{m.emitMany(await s)})}static fromPromises(s){return new q(async m=>{await Promise.all(s.map(async _=>m.emitOne(await _)))})}static merge(s){return new q(async m=>{await Promise.all(s.map(async _=>{for await(const A of _)m.emitOne(A)}))})}[Symbol.asyncIterator](){let s=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(s<this._results.length)return{done:!1,value:this._results[s++]};if(this._state===1)return{done:!0,value:void 0};await h.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(s,m){return new q(async _=>{for await(const A of s)_.emitOne(m(A))})}map(s){return q.map(this,s)}static filter(s,m){return new q(async _=>{for await(const A of s)m(A)&&_.emitOne(A)})}filter(s){return q.filter(this,s)}static coalesce(s){return q.filter(s,m=>!!m)}coalesce(){return q.coalesce(this)}static async toPromise(s){const m=[];for await(const _ of s)m.push(_);return m}toPromise(){return q.toPromise(this)}emitOne(s){this._state===0&&(this._results.push(s),this._onStateChanged.fire())}emitMany(s){this._state===0&&(this._results=this._results.concat(s),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(s){this._state===0&&(this._state=2,this._error=s,this._onStateChanged.fire())}}t.AsyncIterableObject=q,q.EMPTY=q.fromArray([]);class K extends q{constructor(s,m){super(m);this._source=s}cancel(){this._source.cancel()}}t.CancelableAsyncIterableObject=K;function G(p){const s=new u.CancellationTokenSource,m=p(s.token);return new K(s,async _=>{const A=s.token.onCancellationRequested(()=>{A.dispose(),s.dispose(),_.reject((0,P.canceled)())});try{for await(const B of m){if(s.token.isCancellationRequested)return;_.emitOne(B)}A.dispose(),s.dispose()}catch(B){A.dispose(),s.dispose(),_.reject(B)}})}t.createCancelableAsyncIterable=G}),define(V[21],H([0,1]),function(z,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.isUUID=void 0;const u=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function P(c){return u.test(c)}t.isUUID=P;const h=new Uint8Array(16),I=[];for(let c=0;c<256;c++)I.push(c.toString(16).padStart(2,"0"));let d;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?d=crypto.getRandomValues.bind(crypto):d=function(c){for(let a=0;a<c.length;a++)c[a]=Math.floor(Math.random()*256);return c};function v(){d(h),h[6]=h[6]&15|64,h[8]=h[8]&63|128;let c=0,a="";return a+=I[h[c++]],a+=I[h[c++]],a+=I[h[c++]],a+=I[h[c++]],a+="-",a+=I[h[c++]],a+=I[h[c++]],a+="-",a+=I[h[c++]],a+=I[h[c++]],a+="-",a+=I[h[c++]],a+=I[h[c++]],a+="-",a+=I[h[c++]],a+=I[h[c++]],a+=I[h[c++]],a+=I[h[c++]],a+=I[h[c++]],a+=I[h[c++]],a}t.generateUuid=v}),define(V[22],H([0,1,36]),function(z,t,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineDecoder=void 0;class P{constructor(I="utf8"){this.stringDecoder=new u.StringDecoder(I),this.remaining=null}write(I){const d=[],v=this.remaining?this.remaining+this.stringDecoder.write(I):this.stringDecoder.write(I);if(v.length<1)return d;let c=0,a,y=c;for(;y<v.length;)if(a=v.charCodeAt(y),a===13||a===10){if(d.push(v.substring(c,y)),y++,y<v.length){const U=a;a=v.charCodeAt(y),(U===13&&a===10||U===10&&a===13)&&y++}c=y}else y++;return this.remaining=c<v.length?v.substr(c):null,d}end(){return this.remaining}}t.LineDecoder=P}),define(V[23],H([0,1,37,38,39,19,3,17,4,2,10,6,21]),function(z,t,u,P,h,I,d,v,c,a,y,U,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Promises=t.writeFileSync=t.SymlinkSupport=t.whenDeleted=t.readdirSync=t.rimrafSync=t.RimRafMode=void 0;var L;(function(k){k[k.UNLINK=0]="UNLINK",k[k.MOVE=1]="MOVE"})(L=t.RimRafMode||(t.RimRafMode={}));async function l(k,O=L.UNLINK){if((0,d.isRootOrDriveLetter)(k))throw new Error("rimraf - will refuse to recursively delete root");return O===L.UNLINK?D(k):b(k)}async function b(k){try{const O=(0,c.join)((0,P.tmpdir)(),(0,F.generateUuid)());try{await t.Promises.rename(k,O)}catch(j){return D(k)}D(O).catch(j=>{})}catch(O){if(O.code!=="ENOENT")throw O}}async function D(k){return t.Promises.rmdir(k,{recursive:!0,maxRetries:3})}function M(k){if((0,d.isRootOrDriveLetter)(k))throw new Error("rimraf - will refuse to recursively delete root");u.rmdirSync(k,{recursive:!0})}t.rimrafSync=M;async function N(k,O){return E(await(O?T(k):(0,h.promisify)(u.readdir)(k)))}async function T(k){try{return await(0,h.promisify)(u.readdir)(k,{withFileTypes:!0})}catch(W){console.warn("[node.js fs] readdir with filetypes failed with error: ",W)}const O=[],j=await N(k);for(const W of j){let q=!1,K=!1,G=!1;try{const p=await t.Promises.lstat((0,c.join)(k,W));q=p.isFile(),K=p.isDirectory(),G=p.isSymbolicLink()}catch(p){console.warn("[node.js fs] unexpected error from lstat after readdir: ",p)}O.push({name:W,isFile:()=>q,isDirectory:()=>K,isSymbolicLink:()=>G})}return O}function g(k){return E(u.readdirSync(k))}t.readdirSync=g;function E(k){return k.map(O=>typeof O=="string"?a.isMacintosh?(0,v.normalizeNFC)(O):O:(O.name=a.isMacintosh?(0,v.normalizeNFC)(O.name):O.name,O))}async function R(k){const O=await N(k),j=[];for(const W of O)await i.existsDirectory((0,c.join)(k,W))&&j.push(W);return j}function w(k,O=1e3){return new Promise(j=>{let W=!1;const q=setInterval(()=>{W||(W=!0,u.access(k,K=>{W=!1,K&&(clearInterval(q),j(void 0))}))},O)})}t.whenDeleted=w;var i;(function(k){async function O(q){let K;try{if(K=await t.Promises.lstat(q),!K.isSymbolicLink())return{stat:K}}catch(G){}try{return{stat:await t.Promises.stat(q),symbolicLink:K?.isSymbolicLink()?{dangling:!1}:void 0}}catch(G){if(G.code==="ENOENT"&&K)return{stat:K,symbolicLink:{dangling:!0}};if(a.isWindows&&G.code==="EACCES")try{return{stat:await t.Promises.stat(await t.Promises.readlink(q)),symbolicLink:{dangling:!1}}}catch(p){if(p.code==="ENOENT"&&K)return{stat:K,symbolicLink:{dangling:!0}};throw p}throw G}}k.stat=O;async function j(q){try{const{stat:K,symbolicLink:G}=await k.stat(q);return K.isFile()&&G?.dangling!==!0}catch(K){}return!1}k.existsFile=j;async function W(q){try{const{stat:K,symbolicLink:G}=await k.stat(q);return K.isDirectory()&&G?.dangling!==!0}catch(K){}return!1}k.existsDirectory=W})(i=t.SymlinkSupport||(t.SymlinkSupport={}));const e=new I.ResourceQueue;function r(k,O,j){return e.queueFor(U.URI.file(k),y.extUriBiasedIgnorePathCase).queue(()=>{const W=S(j);return new Promise((q,K)=>o(k,O,W,G=>G?K(G):q()))})}let n=!0;function o(k,O,j,W){if(!n)return u.writeFile(k,O,{mode:j.mode,flag:j.flag},W);u.open(k,j.flag,j.mode,(q,K)=>{if(q)return W(q);u.writeFile(K,O,G=>{if(G)return u.close(K,()=>W(G));u.fdatasync(K,p=>(p&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",p),n=!1),u.close(K,s=>W(s))))})})}function f(k,O,j){const W=S(j);if(!n)return u.writeFileSync(k,O,{mode:W.mode,flag:W.flag});const q=u.openSync(k,W.flag,W.mode);try{u.writeFileSync(q,O);try{u.fdatasyncSync(q)}catch(K){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",K),n=!1}}finally{u.closeSync(q)}}t.writeFileSync=f;function S(k){return k?{mode:typeof k.mode=="number"?k.mode:438,flag:typeof k.flag=="string"?k.flag:"w"}:{mode:438,flag:"w"}}async function C(k,O){if(k===O)return;async function j(W){try{const q=await t.Promises.lstat(W);if(q.isDirectory()||q.isSymbolicLink())return;await t.Promises.utimes(W,q.atime,new Date)}catch(q){}}try{await t.Promises.rename(k,O),await j(O)}catch(W){if(k.toLowerCase()!==O.toLowerCase()&&W.code==="EXDEV"||k.endsWith("."))await $(k,O,{preserveSymlinks:!1}),await l(k,L.MOVE),await j(O);else throw W}}async function $(k,O,j){return J(k,O,{root:{source:k,target:O},options:j,handledSourcePaths:new Set})}const Q=511;async function J(k,O,j){if(j.handledSourcePaths.has(k))return;j.handledSourcePaths.add(k);const{stat:W,symbolicLink:q}=await i.stat(k);if(q){if(j.options.preserveSymlinks)try{return await ie(k,O,j)}catch(K){console.warn("[node.js fs] copy of symlink failed: ",K)}if(q.dangling)return}return W.isDirectory()?Z(k,O,W.mode&Q,j):te(k,O,W.mode&Q)}async function Z(k,O,j,W){await t.Promises.mkdir(O,{recursive:!0,mode:j});const q=await N(k);for(const K of q)await J((0,c.join)(k,K),(0,c.join)(O,K),W)}async function te(k,O,j){await t.Promises.copyFile(k,O),await t.Promises.chmod(O,j)}async function ie(k,O,j){let W=await t.Promises.readlink(k);(0,d.isEqualOrParent)(W,j.root.source,!a.isLinux)&&(W=(0,c.join)(j.root.target,W.substr(j.root.source.length+1))),await t.Promises.symlink(W,O)}t.Promises=new class{get access(){return(0,h.promisify)(u.access)}get stat(){return(0,h.promisify)(u.stat)}get lstat(){return(0,h.promisify)(u.lstat)}get utimes(){return(0,h.promisify)(u.utimes)}get read(){return(0,h.promisify)(u.read)}get readFile(){return(0,h.promisify)(u.readFile)}get write(){return(0,h.promisify)(u.write)}get appendFile(){return(0,h.promisify)(u.appendFile)}get fdatasync(){return(0,h.promisify)(u.fdatasync)}get truncate(){return(0,h.promisify)(u.truncate)}get rename(){return(0,h.promisify)(u.rename)}get copyFile(){return(0,h.promisify)(u.copyFile)}get open(){return(0,h.promisify)(u.open)}get close(){return(0,h.promisify)(u.close)}get symlink(){return(0,h.promisify)(u.symlink)}get readlink(){return(0,h.promisify)(u.readlink)}get chmod(){return(0,h.promisify)(u.chmod)}get mkdir(){return(0,h.promisify)(u.mkdir)}get unlink(){return(0,h.promisify)(u.unlink)}get rmdir(){return(0,h.promisify)(u.rmdir)}get realpath(){return(0,h.promisify)(u.realpath)}async exists(k){try{return await t.Promises.access(k),!0}catch{return!1}}get readdir(){return N}get readDirsInDir(){return R}get writeFile(){return r}get rm(){return l}get move(){return C}get copy(){return $}}}),define(V[24],H([25,26]),function(z,t){return z.create("vs/base/common/errorMessage",t)}),define(V[27],H([0,1,16,5,24]),function(z,t,u,P,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toErrorMessage=void 0;function I(a,y){return y&&(a.stack||a.stacktrace)?h.localize(0,null,v(a),d(a.stack)||d(a.stacktrace)):v(a)}function d(a){return Array.isArray(a)?a.join(`
`):a}function v(a){return typeof a.code=="string"&&typeof a.errno=="number"&&typeof a.syscall=="string"?h.localize(1,null,a.message):a.message||h.localize(2,null)}function c(a=null,y=!1){if(!a)return h.localize(3,null);if(Array.isArray(a)){const U=u.coalesce(a),F=c(U[0],y);return U.length>1?h.localize(4,null,F,U.length):F}if(P.isString(a))return a;if(a.detail){const U=a.detail;if(U.error)return I(U.error,y);if(U.exception)return I(U.exception,y)}return a.stack?I(a,y):a.message?a.message:h.localize(5,null)}t.toErrorMessage=c}),define(V[28],H([25,26]),function(z,t){return z.create("vs/base/node/processes",t)}),define(V[29],H([0,1,30,3,9,31,4,2,40,11,5,22,23,28]),function(z,t,u,P,h,I,d,v,c,a,y,U,F,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.win32=t.createQueuedSender=t.LineProcess=t.AbstractProcess=t.getWindowsShell=t.removeDangerousEnvVariables=t.TerminateResponseCode=t.Source=void 0,Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return a.Source}}),Object.defineProperty(t,"TerminateResponseCode",{enumerable:!0,get:function(){return a.TerminateResponseCode}});function l(R){switch(R){case 0:return 0;case 1:return 2;case 128:return 3;default:return 1}}function b(R,w){if(v.isWindows)try{const i={stdio:["pipe","pipe","ignore"]};w&&(i.cwd=w);const e=u.execFile("taskkill",["/T","/F","/PID",R.pid.toString()],i);return new Promise(r=>{e.once("error",n=>{r({success:!1,error:n})}),e.once("exit",(n,o)=>{r(n===0?{success:!0}:{success:!1,code:n!==null?n:1})})})}catch(i){return Promise.resolve({success:!1,error:i,code:i.status?l(i.status):1})}else if(v.isLinux||v.isMacintosh)try{const i=h.FileAccess.asFileUri("vs/base/node/terminateProcess.sh",z).fsPath;return new Promise(e=>{u.execFile(i,[R.pid.toString()],{encoding:"utf8",shell:!0},(r,n,o)=>{e(r?{success:!1,error:r}:{success:!0})})})}catch(i){return Promise.resolve({success:!1,error:i})}else R.kill("SIGKILL");return Promise.resolve({success:!0})}function D(R){!R||(delete R.DEBUG,v.isMacintosh&&delete R.DYLD_LIBRARY_PATH,v.isLinux&&delete R.LD_PRELOAD)}t.removeDangerousEnvVariables=D;function M(R=c.env){return R.comspec||"cmd.exe"}t.getWindowsShell=M;class N{constructor(w,i,e,r){if(i!==void 0&&e!==void 0&&r!==void 0)this.cmd=w,this.args=i,this.shell=e,this.options=r;else{const n=w;this.cmd=n.command,this.shell=n.isShellCommand,this.args=n.args.slice(0),this.options=n.options||{}}if(this.childProcess=null,this.childProcessPromise=null,this.terminateRequested=!1,this.options.env){const n=Object.create(null);Object.keys(c.env).forEach(o=>{n[o]=c.env[o]}),Object.keys(this.options.env).forEach(o=>{n[o]=this.options.env[o]}),this.options.env=n}}getSanitizedCommand(){let w=this.cmd.toLowerCase();const i=w.lastIndexOf(d.sep);return i!==-1&&(w=w.substring(i+1)),N.WellKnowCommands[w]?w:"other"}start(w){return v.isWindows&&(this.options&&this.options.cwd&&P.isUNC(this.options.cwd)||!this.options&&P.isUNC(c.cwd()))?Promise.reject(new Error(L.localize(0,null))):this.useExec().then(i=>{let e,r;const n=new Promise((o,f)=>{e=o,r=f});if(i){let o=this.cmd;this.args&&(o=o+" "+this.args.join(" ")),this.childProcess=u.exec(o,this.options,(f,S,C)=>{this.childProcess=null;const $=f;$&&$.killed?r({killed:this.terminateRequested,stdout:S.toString(),stderr:C.toString()}):this.handleExec(e,w,f,S,C)})}else{let o=null;const f=S=>{this.childProcess=null,this.childProcessPromise=null,this.handleClose(S,e,w,r);const C={terminated:this.terminateRequested};y.isNumber(S)&&(C.cmdCode=S),e(C)};if(this.shell&&v.isWindows){const S=I.deepClone(this.options);S.windowsVerbatimArguments=!0,S.detached=!1;let C=!1,$=!1;const Q=[];let J=this.ensureQuotes(this.cmd);Q.push(J.value),C=J.quoted,this.args&&this.args.forEach(te=>{J=this.ensureQuotes(te),Q.push(J.value),$=$&&J.quoted});const Z=["/s","/c"];C?$?Z.push('"'+Q.join(" ")+'"'):Q.length>1?Z.push('"'+Q[0]+'" '+Q.slice(1).join(" ")):Z.push('"'+Q[0]+'"'):Z.push(Q.join(" ")),o=u.spawn(M(),Z,S)}else this.cmd&&(o=u.spawn(this.cmd,this.args,this.options));o&&(this.childProcess=o,this.childProcessPromise=Promise.resolve(o),this.pidResolve&&(this.pidResolve(y.isNumber(o.pid)?o.pid:-1),this.pidResolve=void 0),o.on("error",S=>{this.childProcess=null,r({terminated:this.terminateRequested,error:S})}),o.pid&&(this.childProcess.on("close",f),this.handleSpawn(o,e,w,r,!0)))}return n})}handleClose(w,i,e,r){}ensureQuotes(w){return N.regexp.test(w)?{value:'"'+w+'"',quoted:!0}:{value:w,quoted:w.length>0&&w[0]==='"'&&w[w.length-1]==='"'}}get pid(){return this.childProcessPromise?this.childProcessPromise.then(w=>w.pid,w=>-1):new Promise(w=>{this.pidResolve=w})}terminate(){return this.childProcessPromise?this.childProcessPromise.then(w=>(this.terminateRequested=!0,b(w,this.options.cwd).then(i=>(i.success&&(this.childProcess=null),i))),w=>({success:!0})):Promise.resolve({success:!0})}useExec(){return new Promise(w=>{if(!this.shell||!v.isWindows)return w(!1);const i=u.spawn(M(),["/s","/c"]);i.on("error",e=>w(!0)),i.on("exit",e=>w(!1))})}}t.AbstractProcess=N,N.WellKnowCommands={ant:!0,cmake:!0,eslint:!0,gradle:!0,grunt:!0,gulp:!0,jake:!0,jenkins:!0,jshint:!0,make:!0,maven:!0,msbuild:!0,msc:!0,nmake:!0,npm:!0,rake:!0,tsc:!0,xbuild:!0},N.regexp=/^[^"].* .*[^"]/;class T extends N{constructor(w,i,e,r){super(w,i,e,r);this.stdoutLineDecoder=null,this.stderrLineDecoder=null}handleExec(w,i,e,r,n){[r,n].forEach((o,f)=>{const S=new U.LineDecoder;S.write(o).forEach(Q=>{i({line:Q,source:f===0?0:1})});const $=S.end();$&&i({line:$,source:f===0?0:1})}),w({terminated:this.terminateRequested,error:e})}handleSpawn(w,i,e,r,n){const o=new U.LineDecoder,f=new U.LineDecoder;w.stdout.on("data",S=>{o.write(S).forEach($=>e({line:$,source:0}))}),w.stderr.on("data",S=>{f.write(S).forEach($=>e({line:$,source:1}))}),this.stdoutLineDecoder=o,this.stderrLineDecoder=f}handleClose(w,i,e,r){const n=this.stdoutLineDecoder?this.stdoutLineDecoder.end():null;n&&e({line:n,source:0});const o=this.stderrLineDecoder?this.stderrLineDecoder.end():null;o&&e({line:o,source:1})}}t.LineProcess=T;function g(R){let w=[],i=!1;const e=function(r){if(i){w.push(r);return}(!R.send(r,o=>{if(o&&console.error(o),i=!1,w.length>0){const f=w.slice(0);w=[],f.forEach(S=>e(S))}})||v.isWindows)&&(i=!0)};return{send:e}}t.createQueuedSender=g;var E;(function(R){async function w(i,e,r){if(d.isAbsolute(i))return i;if(e===void 0&&(e=c.cwd()),d.dirname(i)!=="."||(r===void 0&&y.isString(c.env.PATH)&&(r=c.env.PATH.split(d.delimiter)),r===void 0||r.length===0))return d.join(e,i);async function o(f){if(await F.Promises.exists(f)){let S;try{S=await F.Promises.stat(f)}catch(C){C.message.startsWith("EACCES")&&(S=await F.Promises.lstat(f))}return S?!S.isDirectory():!1}return!1}for(let f of r){let S;if(d.isAbsolute(f)?S=d.join(f,i):S=d.join(e,f,i),await o(S))return S;let C=S+".com";if(await o(C)||(C=S+".exe",await o(C)))return C}return d.join(e,i)}R.findExecutable=w})(E=t.win32||(t.win32={}))}),define(V[32],H([0,1]),function(z,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refineServiceDecorator=t.createDecorator=t.IInstantiationService=t._util=void 0;var u;(function(d){d.serviceIds=new Map,d.DI_TARGET="$di$target",d.DI_DEPENDENCIES="$di$dependencies";function v(c){return c[d.DI_DEPENDENCIES]||[]}d.getServiceDependencies=v})(u=t._util||(t._util={})),t.IInstantiationService=h("instantiationService");function P(d,v,c,a){v[u.DI_TARGET]===v?v[u.DI_DEPENDENCIES].push({id:d,index:c,optional:a}):(v[u.DI_DEPENDENCIES]=[{id:d,index:c,optional:a}],v[u.DI_TARGET]=v)}function h(d){if(u.serviceIds.has(d))return u.serviceIds.get(d);const v=function(c,a,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");P(v,c,y,!1)};return v.toString=()=>d,u.serviceIds.set(d,v),v}t.createDecorator=h;function I(d){return d}t.refineServiceDecorator=I}),define(V[33],H([0,1,41,32]),function(z,t,u,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ipcSharedProcessWorkerChannelName=t.ISharedProcessWorkerService=t.hash=void 0;function h(I){return(0,u.hash)({moduleId:I.process.moduleId,windowId:I.reply.windowId})}t.hash=h,t.ISharedProcessWorkerService=(0,P.createDecorator)("sharedProcessWorkerService"),t.ipcSharedProcessWorkerChannelName="sharedProcessWorker"}),define(V[34],H([0,1]),function(z,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedProcessWorkerMessages=void 0;var u;(function(P){P.Spawn="vscode:shared-process->shared-process-worker=spawn",P.Terminate="vscode:shared-process->shared-process-worker=terminate",P.SelfTerminated="vscode:shared-process-worker->shared-process=selfTerminated",P.Ready="vscode:shared-process-worker->shared-process=ready",P.Ack="vscode:shared-process-worker->shared-process=ack",P.Trace="vscode:shared-process-worker->shared-process=trace",P.Info="vscode:shared-process-worker->shared-process=info",P.Warn="vscode:shared-process-worker->shared-process=warn",P.Error="vscode:shared-process-worker->shared-process=error"})(u=t.SharedProcessWorkerMessages||(t.SharedProcessWorkerMessages={}))}),define(V[42],H([0,1,30,43,14,18,27,20,7,31,5,29,33,34]),function(z,t,u,P,h,I,d,v,c,a,y,U,F,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;function l(){const T=new b;return N({id:L.SharedProcessWorkerMessages.Ready}),{onmessage:(g,E)=>T.onMessage(g,E)}}t.create=l;class b{constructor(){this.processes=new Map}onMessage(g,E){switch(g.id){case L.SharedProcessWorkerMessages.Spawn:E&&E[0]instanceof MessagePort&&g.environment&&this.spawn(E[0],g.configuration,g.environment);break;case L.SharedProcessWorkerMessages.Terminate:this.terminate(g.configuration);break;default:M.warn(`Unexpected shared process message '${g}'`)}g.nonce&&N({id:L.SharedProcessWorkerMessages.Ack,nonce:g.nonce})}spawn(g,E,R){try{this.terminate(E);const w=new D(g,E,R);w.spawn();const i=v.Event.once(w.onDidProcessSelfTerminate)(r=>{N({id:L.SharedProcessWorkerMessages.SelfTerminated,configuration:E,message:JSON.stringify(r)})}),e=(0,F.hash)(E);this.processes.set(e,(0,c.toDisposable)(()=>{i.dispose(),w.dispose(),this.processes.delete(e)}))}catch(w){M.error(`Unexpected error forking worker process: ${(0,d.toErrorMessage)(w)}`)}}terminate(g){const E=this.processes.get((0,F.hash)(g));E&&E.dispose()}}class D extends c.Disposable{constructor(g,E,R){super();this.port=g,this.configuration=E,this.environment=R,this._onDidProcessSelfTerminate=this._register(new v.Emitter),this.onDidProcessSelfTerminate=this._onDidProcessSelfTerminate.event,this.child=void 0}spawn(){M.trace(`Forking worker process (env: ${JSON.stringify(this.environment.env)})`),this.child=(0,u.fork)(this.environment.bootstrapPath,[`--type=${this.configuration.process.type}`],{env:this.getEnv()}),M.info(`Starting worker process with pid ${this.child.pid} (type: ${this.configuration.process.type}, window: ${this.configuration.reply.windowId}).`);const g=v.Event.fromNodeEventEmitter(this.child,"error");this._register(g(r=>M.warn(`Error from child process: ${(0,d.toErrorMessage)(r)}`)));const E=v.Event.fromNodeEventEmitter(this.child,"exit",(r,n)=>({code:r,signal:n}));this._register(E(({code:r,signal:n})=>{const o=`Worker process with pid ${this.child?.pid} terminated by itself with code ${r}, signal: ${n} (type: ${this.configuration.process.type}, window: ${this.configuration.reply.windowId})`;r!==0&&n!=="SIGTERM"?M.error(o):M.info(o),this.child=void 0,this._onDidProcessSelfTerminate.fire({code:(0,y.withNullAsUndefined)(r),signal:(0,y.withNullAsUndefined)(n)})}));const R=this._register(new v.Emitter),w=v.Event.fromNodeEventEmitter(this.child,"message",r=>r);this._register(w(r=>{(0,I.isRemoteConsoleLog)(r)?(0,P.log)(r,"SharedProcess worker"):R.fire(h.VSBuffer.wrap(Buffer.from(r,"base64")))}));const i=r=>{this.child?.connected?this.child.send(r.buffer.toString("base64")):M.warn("Unable to deliver message to disconnected child")},e=R.event;this._register(e(r=>this.port.postMessage(r.buffer))),this.port.onmessage=r=>i(h.VSBuffer.wrap(r.data)),this._register((0,c.toDisposable)(()=>this.port.onmessage=null))}getEnv(){const g={...(0,a.deepClone)(process.env),...this.environment.env,VSCODE_AMD_ENTRYPOINT:this.configuration.process.moduleId,VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true",VSCODE_PARENT_PID:String(process.pid)};return(0,U.removeDangerousEnvVariables)(g),g}dispose(){super.dispose(),!!this.child&&(this.child.kill(),M.info(`Worker process with pid ${this.child?.pid} terminated normally (type: ${this.configuration.process.type}, window: ${this.configuration.reply.windowId}).`))}}var M;(function(T){function g(i){N({id:L.SharedProcessWorkerMessages.Error,message:i})}T.error=g;function E(i){N({id:L.SharedProcessWorkerMessages.Warn,message:i})}T.warn=E;function R(i){N({id:L.SharedProcessWorkerMessages.Info,message:i})}T.info=R;function w(i){N({id:L.SharedProcessWorkerMessages.Trace,message:i})}T.trace=w})(M||(M={}));function N(T){postMessage(T)}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/899d46d82c4c95423fb7e10e68eba52050e30ba3/core/vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain.js.map
